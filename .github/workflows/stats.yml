name: Generate Stats SVGs

on:
  schedule:
    # Runs daily at 00:00 UTC (08:00 Beijing time)
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  generate-stats:
    runs-on: ubuntu-latest
    steps:
      - name: Generate GitHub Stats
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: johntime2005
          template: classic
          filename: stats/github-stats.svg
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Shanghai
          config_output: svg
          extras_css: |
            svg, foreignObject { background-color: #1a1b27 !important; }
            h2 { color: #7aa2f7 !important; }
            * { color: #a9b1d6; }

      - name: Generate Top Languages
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: johntime2005
          template: classic
          filename: stats/top-langs.svg
          base: ""
          plugin_languages: yes
          plugin_languages_details: percentage
          plugin_languages_limit: 8
          config_timezone: Asia/Shanghai
          config_output: svg
          extras_css: |
            svg, foreignObject { background-color: #1a1b27 !important; }
            h2 { color: #7aa2f7 !important; }
            * { color: #a9b1d6; }

      - name: Generate Contribution Calendar
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: johntime2005
          template: classic
          filename: stats/streak-stats.svg
          base: ""
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year
          config_timezone: Asia/Shanghai
          config_output: svg
          extras_css: |
            svg, foreignObject { background-color: #1a1b27 !important; }
            h2 { color: #7aa2f7 !important; }
            * { color: #a9b1d6; }
